(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&m.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},a={app:0},i=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/todo-list/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0201":function(t,e,s){"use strict";s("1006")},"034f":function(t,e,s){"use strict";s("85ec")},1006:function(t,e,s){},"32ea":function(t,e,s){},"3b73":function(t,e,s){},"3ce3":function(t,e,s){"use strict";s("4cb3")},"460b":function(t,e,s){"use strict";s("fb92")},"4cb3":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=s("8c4f"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"todo-list"},[s("FieldLists"),s("FieldTasks")],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-lists"},[s("div",{staticClass:"field-lists__filter"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"field-lists__filter-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"all"}},[t._v("Все")]),s("option",{attrs:{value:"not-completed"}},[t._v("Незавершенные")]),s("option",{attrs:{value:"completed"}},[t._v("Завершенные")])])]),s("ul",{staticClass:"field-lists__lists"},t._l(t.filteredLists,(function(e){return s("List",{key:e.id,staticClass:"field-lists__lists-item",attrs:{activeId:t.$store.state.lists.activeListId,list:e},on:{deleteList:t.deleteList,setActiveList:t.setActiveList}})})),1),s("FormAdd",t._b({staticClass:"field-lists__form",on:{addList:t.createdListForTasks}},"FormAdd",t.formAddDataToFieldLists,!1))],1)},c=[],l=s("5530"),u=s("2f62"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"list"},[s("button",{class:["list__choose-btn",{"list__choose-btn_active":t.isActive},{"list_not-completed":t.stateNotCompletedList},{list_completed:t.stateCompletedList}],attrs:{type:"button"},on:{click:function(e){return t.$emit("setActiveList",t.list.id)}}},[t._v(" "+t._s(t.list.name)+" ")]),s("button",{staticClass:"list__delete-btn",on:{click:function(e){return t.$emit("deleteList",t.list)}}})])},m=[],f=(s("a9e3"),{props:{list:{type:Object,required:!0},activeId:{type:Number}},computed:{isActive:function(){return this.activeId===this.list.id},stateNotCompletedList:function(){return 0==this.list.is_completed&&this.list.count_tasks},stateCompletedList:function(){return 1==this.list.is_completed&&0!==this.list.count_tasks}}}),p=f,h=(s("8c2f"),s("2877")),_=Object(h["a"])(p,d,m,!1,null,"eaebdd5a",null),k=_.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formInputValue,expression:"formInputValue"}],staticClass:"form__input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.formInputValue},on:{input:function(e){e.target.composing||(t.formInputValue=e.target.value)}}}),t.checkboxName?s("fieldset",{staticClass:"form__fieldset-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formCheckboxChecked,expression:"formCheckboxChecked"}],staticClass:"form__checkbox",attrs:{id:"check",type:"checkbox"},domProps:{checked:Array.isArray(t.formCheckboxChecked)?t._i(t.formCheckboxChecked,null)>-1:t.formCheckboxChecked},on:{change:function(e){var s=t.formCheckboxChecked,n=e.target,a=!!n.checked;if(Array.isArray(s)){var i=null,r=t._i(s,i);n.checked?r<0&&(t.formCheckboxChecked=s.concat([i])):r>-1&&(t.formCheckboxChecked=s.slice(0,r).concat(s.slice(r+1)))}else t.formCheckboxChecked=a}}}),s("label",{attrs:{for:"check"}},[t._v(t._s(t.checkboxName))])]):t._e(),s("button",{staticClass:"form__btn",attrs:{type:"submit",disabled:!t.disableSubmit}},[t._v(t._s(t.buttonName))])])},b=[],g={props:{placeholder:String,buttonName:String,checkboxName:String,emitName:String},data:function(){return{formInputValue:"",formCheckboxChecked:!1}},computed:{disableSubmit:function(){return this.formInputValue}},methods:{submitForm:function(){this.$emit(this.emitName,this.formInputValue,this.formCheckboxChecked),this.formInputValue="",this.formCheckboxChecked=!1}}},w=g,C=(s("3ce3"),Object(h["a"])(w,v,b,!1,null,"3f5a208c",null)),x=C.exports,y={components:{List:k,FormAdd:x},data:function(){return{formAddDataToFieldLists:{placeholder:"Введите название списка",buttonName:"Добавить Список",checkboxName:null,emitName:"addList"},filter:"not-completed"}},computed:Object(l["a"])({},Object(u["c"])(["allLists","filteredLists"])),methods:Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(u["b"])(["postNewList","deleteList"])),Object(u["d"])(["setActiveList"])),{},{createdListForTasks:function(t){this.postNewList({name:t,is_closed:!1})&&alert("Вы создали список: ".concat(t))}}),watch:{filter:function(t){this.$store.state.lists.valueFilteredLists=t}}},L=y,j=(s("e4bb"),Object(h["a"])(L,o,c,!1,null,null,null)),O=j.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-tasks"},[s("h2",{staticClass:"field-tasks__title"},[t._v(" "+t._s(t.activeList?t.activeList.name:"Список дел не выбран")+" ")]),t.activeList?s("ul",{staticClass:"field-tasks__task-list"},t._l(t.activeListTasks,(function(t){return s("Task",{key:t.id,attrs:{task:t}})})),1):t._e(),t.activeList?s("FormAdd",t._b({staticClass:"field-tasks__form",on:{addTask:t.addTask}},"FormAdd",t.formAddDataToFieldTasks,!1)):t._e()],1)},S=[],N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"task"},[s("input",{staticClass:"task__checkbox",attrs:{type:"checkbox",id:t.task.id},domProps:{checked:t.task.is_completed},on:{change:function(e){return t.updateStateTask(t.task)}}}),s("label",{class:["task__label",{task__label_type_urgency:5==t.task.urgency}],attrs:{for:t.task.id}},[s("div",{staticClass:"task__label-inner"},[s("span",{staticClass:"task__name"},[t._v(t._s(t.task.name))]),s("time",{staticClass:"task__time"},[t._v(t._s(t.task.created_at))])])]),s("button",{staticClass:"task__button-delete",attrs:{type:"button"},on:{click:function(e){return t.confirmDeleteTask({id:t.task.id})}}})])},I=[],$=(s("b0c0"),{props:{task:Object},methods:Object(l["a"])(Object(l["a"])({},Object(u["b"])(["deleteTask","updateStateTask","updateStateList"])),{},{confirmDeleteTask:function(t){confirm("Удалить дело ".concat(this.task.name," ?"))&&this.deleteTask(t)}})}),A=$,R=(s("a3d1"),Object(h["a"])(A,N,I,!1,null,"5f6ec93a",null)),F=R.exports,P={components:{FormAdd:x,Task:F},data:function(){return{formAddDataToFieldTasks:{placeholder:"Введите дело",checkboxName:"Срочно",buttonName:"Добавить дело",emitName:"addTask"}}},computed:Object(u["c"])(["activeListTasks","activeList"]),methods:Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(u["b"])(["postNewTask"])),Object(u["d"])([])),{},{addTask:function(t,e){this.postNewTask({name:t,list_id:this.activeList.id,executor_user_id:this.activeList.user_id,urgency:e?5:1,is_completed:!1})&&alert("Вы создали дело: ".concat(t))}})},E=P,D=(s("460b"),Object(h["a"])(E,T,S,!1,null,null,null)),J=D.exports,q={components:{FieldLists:O,FieldTasks:J}},U=q,V=(s("e7f4"),Object(h["a"])(U,i,r,!1,null,"830cfffe",null)),M=V.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-in"},[s("form",{staticClass:"sign-in__form",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("h2",{staticClass:"sign-in__title"},[t._v("Вход")]),s("fieldset",{staticClass:"sign-in__fieldset"},[s("label",{staticClass:"sign-in__label",attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"sign-in__input",attrs:{id:"email",required:"",type:"email",placeholder:"Введите Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),s("fieldset",{staticClass:"sign-in__fieldset"},[s("label",{staticClass:"sign-in__label",attrs:{for:"password"}},[t._v("Пароль")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"sign-in__input",attrs:{id:"password",required:"",type:"password",placeholder:"Введите пароль"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),s("button",{staticClass:"sign-in__btn",attrs:{type:"submit"}},[t._v("Login")]),s("router-link",{staticClass:"link-ger",attrs:{to:"/register"}},[t._v("Зарегистрироваться")])],1)])},z=[],B={data:function(){return{user:{email:"",password:""}}},methods:{login:function(){this.$store.dispatch("auth/loginUser",this.user)}}},H=B,K=(s("0201"),Object(h["a"])(H,G,z,!1,null,"26852892",null)),Q=K.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-in"},[s("form",{staticClass:"sign-in__form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("h2",{staticClass:"sign-in__title"},[t._v("Регистрация")]),s("fieldset",{staticClass:"sign-in__fieldset"},[s("label",{staticClass:"sign-in__label",attrs:{for:"name"}},[t._v("Имя")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"sign-in__input",attrs:{id:"name",required:"",type:"text",placeholder:"Введите Ваше имя"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),s("fieldset",{staticClass:"sign-in__fieldset"},[s("label",{staticClass:"sign-in__label",attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"sign-in__input",attrs:{id:"email",required:"",type:"email",placeholder:"Введите Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),s("fieldset",{staticClass:"sign-in__fieldset"},[s("label",{staticClass:"sign-in__label",attrs:{for:"password"}},[t._v("Пароль")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"sign-in__input",attrs:{id:"password",required:"",type:"password",placeholder:"Введите пароль"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),s("button",{staticClass:"sign-in__btn",attrs:{type:"submit"}},[t._v("Зарегистрироваться")])])])},X=[],Y={name:"Register",data:function(){return{user:{name:"",email:"",password:""}}},methods:{submit:function(){this.$store.dispatch("auth/registerUser",this.user)}}},Z=Y,tt=(s("e341"),Object(h["a"])(Z,W,X,!1,null,"037f212f",null)),et=tt.exports;n["a"].use(a["a"]);var st=new a["a"]({mode:"history",base:"/todo-list/",routes:[{path:"/",name:"TodoList",component:M},{path:"/login",name:"login",component:Q},{path:"/register",name:"register",component:et}]}),nt=s("b85c"),at=s("1da1"),it=(s("96cf"),s("d3b7"),s("99af"),s("7db0"),s("4de4"),{state:{lists:[],tasks:[],activeListId:null,valueFilteredLists:"not-completed"},actions:{fetchLists:function(t){return Object(at["a"])(regeneratorRuntime.mark((function e(){var s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/list?access_token=".concat(localStorage.getItem("token")));case 2:return s=e.sent,e.next=5,s.json();case 5:n=e.sent,a=n.data,t.commit("updateLists",a);case 8:case"end":return e.stop()}}),e)})))()},postNewList:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function s(){var n,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={attributes:e},s.next=3,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/list/create/?access_token=".concat(localStorage.getItem("token")),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=s.sent,s.next=6,a.json();case 6:i=s.sent,"success"===i.status&&t.commit("addNewList",i.data.attributes);case 8:case"end":return s.stop()}}),s)})))()},updateStateList:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function s(){var n,a,i,r,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.list,a=e.listIsCompleted,i={attributes:{is_completed:a,is_closed:n.is_closed,name:n.name}},s.next=4,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/list/".concat(n.id,"/?access_token=").concat(localStorage.getItem("token")),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 4:return r=s.sent,s.next=7,r.json();case 7:o=s.sent,"Updated!"===o.message&&t.commit("updateStateLists",i.attributes);case 9:case"end":return s.stop()}}),s)})))()},deleteList:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!confirm("Удалить список ".concat(e.name," ?"))){s.next=8;break}return s.next=3,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/list/".concat(e.id,"/?access_token=").concat(localStorage.getItem("token")),{method:"DELETE"});case 3:return n=s.sent,s.next=6,n.json();case 6:a=s.sent,"Deleted!"===a.message&&t.commit("deleteList",e.id);case 8:case"end":return s.stop()}}),s)})))()},fetchTasks:function(t){return Object(at["a"])(regeneratorRuntime.mark((function e(){var s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/task?access_token=".concat(localStorage.getItem("token")));case 2:return s=e.sent,e.next=5,s.json();case 5:n=e.sent,a=n.data,t.commit("getTasks",a.items);case 8:case"end":return e.stop()}}),e)})))()},postNewTask:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function s(){var n,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={attributes:e},s.next=3,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/task/create/?access_token=".concat(localStorage.getItem("token")),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=s.sent,s.next=6,a.json();case 6:i=s.sent,"success"===i.status&&t.commit("addNewTask",i.data.attributes);case 8:case"end":return s.stop()}}),s)})))()},updateStateTask:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function s(){var n,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={attributes:{is_completed:!e.is_completed,list_id:e.list_id,name:e.name,urgency:e.urgency}},s.next=3,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/task/".concat(e.id,"/?access_token=").concat(localStorage.getItem("token")),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=s.sent,s.next=6,a.json();case 6:i=s.sent,"Updated!"===i.message&&t.commit("toggleTaskState",i.data.attributes);case 8:case"end":return s.stop()}}),s)})))()},deleteTask:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/task/".concat(e.id,"/?access_token=").concat(localStorage.getItem("token")),{method:"DELETE"});case 2:return n=s.sent,s.next=5,n.json();case 5:a=s.sent,"Deleted!"===a.message&&t.commit("deleteTask",e.id);case 7:case"end":return s.stop()}}),s)})))()}},mutations:{updateLists:function(t,e){t.lists=e},addNewList:function(t,e){t.lists.push(e)},updateStateLists:function(t,e){var s=e.is_completed,n=e.is_closed,a=e.name,i=t.lists.find((function(t){return t.name===a}));i.is_completed=s,i.is_closed=n},deleteList:function(t,e){t.lists=t.lists.filter((function(t){return t.id!==e}))},setActiveList:function(t,e){t.activeListId=e},getTasks:function(t,e){t.tasks=e},toggleTaskState:function(t,e){t.tasks.find((function(t){return t.id===e.id})).is_completed=e.is_completed;var s,n=!0,a=Object(nt["a"])(t.tasks);try{for(a.s();!(s=a.n()).done;){var i=s.value;if(i.list_id===e.list_id&&!i.is_completed){n=!1;break}}}catch(r){a.e(r)}finally{a.f()}t.lists.find((function(t){return t.id===e.list_id})).is_completed=n},deleteTask:function(t,e){var s=t.tasks.find((function(t){return t.id===e})).list_id;t.tasks=t.tasks.filter((function(t){return t.id!==e}));var n=t.tasks.find((function(t){return t.list_id===s}));n||(t.lists.find((function(t){return t.id===s})).is_completed=!1,t.lists.find((function(t){return t.id===s})).count_tasks=0)},addNewTask:function(t,e){t.tasks.push(e),t.lists.find((function(t){return t.id===e.list_id})).count_tasks++}},getters:{allLists:function(t){return t.lists},activeListTasks:function(t){return t.tasks.filter((function(e){return e.list_id===t.activeListId}))},activeList:function(t){return t.lists.find((function(e){return e.id===t.activeListId}))},filteredLists:function(t){return t.tasks.sort((function(t,e){return t.created_at>e.created_at?-1:t.created_at<e.created_at?1:0})),"all"===t.valueFilteredLists?t.lists.sort((function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})):"completed"===t.valueFilteredLists?t.lists.filter((function(t){return!0===t.is_completed})).sort((function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})):"not-completed"===t.valueFilteredLists?t.lists.filter((function(t){return!1===t.is_completed})).sort((function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})):void 0}}}),rt={namespaced:!0,state:{user:{},addGetParam:null},mutations:{},actions:{registerUser:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/user/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return t.next=4,st.push("/login");case 4:case"end":return t.stop()}}),t)})))()},loginUser:function(t,e){return Object(at["a"])(regeneratorRuntime.mark((function t(){var s,n,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:if(s=t.sent,!s.ok){t.next=19;break}return t.next=6,s.json();case 6:return n=t.sent,localStorage.setItem("token",n.data.access_token),localStorage.setItem("refresh_token",n.data.refresh_token),a={refresh_token:localStorage.getItem("refresh_token")},t.next=12,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/user/refreshAccessToken",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 12:return i=t.sent,t.next=15,i.json();case 15:return r=t.sent,localStorage.setItem("token",r.data.access_token),t.next=19,st.push({path:"/",query:{fetchData:!0}});case 19:case"end":return t.stop()}}),t)})))()}},getters:{}};n["a"].use(u["a"]);var ot=new u["a"].Store({modules:{lists:it,auth:rt}}),ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"nav"},[s("router-link",{staticClass:"nav__link",attrs:{to:"/"}},[t._v("Приложение")]),s("router-link",{staticClass:"nav__link",attrs:{to:"/login"}},[t._v("Вход")])],1),s("div",{staticClass:"container"},[s("router-view")],1)])},lt=[],ut={name:"App",components:{},mounted:function(){var t=this;return Object(at["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=localStorage.getItem("token"),!s){e.next=9;break}return e.next=4,fetch("https://academy2.smw.tom.ru/vasilchenko-konstantin/todo-list/user?access_token=".concat(s));case 4:if(n=e.sent,!n.ok){e.next=9;break}return t.$store.dispatch("fetchLists"),t.$store.dispatch("fetchTasks"),e.abrupt("return");case 9:"login"!==t.$router.currentRoute.name&&t.$router.push("/login");case 10:case"end":return e.stop()}}),e)})))()},watch:{$route:function(t){t.query.fetchData&&(this.$store.dispatch("fetchLists"),this.$store.dispatch("fetchTasks"))}}},dt=ut,mt=(s("034f"),Object(h["a"])(dt,ct,lt,!1,null,null,null)),ft=mt.exports;n["a"].config.productionTip=!1,new n["a"]({router:st,store:ot,render:function(t){return t(ft)}}).$mount("#app")},"85ec":function(t,e,s){},"8c2f":function(t,e,s){"use strict";s("32ea")},a3d1:function(t,e,s){"use strict";s("b4e6")},b4e6:function(t,e,s){},c7be:function(t,e,s){},cf8a:function(t,e,s){},e341:function(t,e,s){"use strict";s("3b73")},e4bb:function(t,e,s){"use strict";s("c7be")},e7f4:function(t,e,s){"use strict";s("cf8a")},fb92:function(t,e,s){}});
//# sourceMappingURL=app.358b277b.js.map